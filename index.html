<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Acyclic Game</title>

    <script src="https://code.createjs.com/easeljs-0.8.2.min.js"></script>
    <script src="https://code.createjs.com/tweenjs-0.6.2.min.js"></script>

    <script src="js/server.js"></script>
    <script src="js/base.js"></script>

    <script src="js/tree.js"></script>
    <script src="js/graph_tree.js"></script>
</head>
<body>

<canvas id="cyclic-canvas" style="width: 100%; height: 100%;"></canvas>

<script>
    /*server = new ServerConnect("ws://192.168.0.56:8080", function () {
        server.sendData({"dx": 10, "dy": 10});
    });

    server.onMessage = function(json) {
        console.log(json);
    };
    */

    base = new Map("cyclic-canvas");

    // base.initScene("new-user");

    let cenX = base.basicCenter.x, cenY = base.basicCenter.y;

    children = [];

    menuGraph = new GraphTree(base);
    menuGraph.addNewVertexToCurrent({x: cenX, y: cenY});

    children.push(menuGraph.addNewVertexByMove(10, 30));
    children.push(menuGraph.addNewVertexByNode({x: 50, y: 100}, menuGraph.getCurrentVertex));

    children.push(menuGraph.addNewVertexByMove(100, -50));

    function randomInteger(min, max) {
        let rand = min - 0.5 + Math.random() * (max - min + 1)
        rand = Math.round(rand);
        return rand;
    }

    createjs.Ticker.addEventListener("tick", tick);
    function tick() {
        children.forEach(function(item) {
            item.data.x += randomInteger(-2, 2);
            item.data.y += randomInteger(-2, 2);
        });

        menuGraph.showNodes();
        base.update();
    }
</script>

</body>
</html>